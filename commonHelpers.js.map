{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/img/bi_x-octagon.png","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightboxConfig = {\n  captionsTitle: 'attr',\n  captionsData: \"alt\",\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', lightboxConfig);\n\nexport function imageTemplate({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\" \n      alt=\"${tags}\"\n    >\n        <div class=\"all-image-info\">\n    <p class=\"image-info\"><span class=\"property-name\">Likes</span>${likes}</p>\n        <p class=\"image-info\"><span class=\"property-name\">Views</span>${views}</p>\n            <p class=\"image-info\"><span class=\"property-name\">Comments</span>${comments}</p>\n                <p class=\"image-info\"><span class=\"property-name\">Downloads</span>${downloads}</p>\n                </div>\n    </a>\n  </li>`;\n}\n\nexport function imagesTemplate(images) {\n  return images.map(imageTemplate).join('');\n}\n\nexport function renderImages(images) {\n  const markup = imagesTemplate(images);\n  document.querySelector('.gallery').insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n    \n}\n\nexport function smoothScroll(page) {\n  if (page === 1) {\n      return;\n  }\n  const galleryChildsList = document.querySelectorAll('.gallery-item');\n  const { height: cardHeight } = galleryChildsList[galleryChildsList.length - 1].getBoundingClientRect();\n  \n  window.scrollBy({\n      top: cardHeight * 2,//лучше 3.5\n      behavior: \"smooth\",\n  });\n}","import axios from 'axios';\nexport const perPage = 15;\n\nexport async function showImage(searchName, page) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const END_POINT = '?';\n    const url = BASE_URL+END_POINT;\n    \n    const options = {\n    params: {\n    key:'42187332-ff85343869753156c1a8d7a61',\n    q: `${searchName}`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n      page: page,\n      per_page: perPage,\n    },\n  };\n  \n  try {const res = await axios.get(url, options);\n  return res.data;\n  } catch (error) {\n  throw new Error('Error fetching images from the server');\n  }\n}\n\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEpSURBVHgBrZXtEcIgDIZTzp5/3URHcSPpJLpBXcVd+FPwiqQt1y+SUNv3DuUkvA+0SQQg5Jx7WOt8zsBYyudEmXsPuijg3bbtB1ipa/jQYQ+UZVmBpHjyprEvyBTGSjf52zwbssdchBxhTkI4c2vtTTJMxcwgw6RObZReXDycMSYBcTWuQX/6RqcMQpCmIOPNHbG30SKAgkjmU8AJBJ3PpQ5GOO2KCYVFGEaFa9J+EbCEDIAsc5SCTCkFPjWXlHWD2Jvw5MNP2b1HBEzN42OZvhMRwmURly1cCvfrszSlC41PxR6SKjQs3g4Qg6z9PpdBxsitIhWDXrPDcZCtWplHHQEhzY+AiOZ7IJz5qg5iWygK/wjfFwD+T18pdfXe37e0j07jTeTBPZYfWztI8097RKsAAAAASUVORK5CYII=\"","import './css/styles.css';\nimport { imageTemplate, imagesTemplate, renderImages, smoothScroll } from './js/render-functions.js';\nimport {showImage, perPage } from './js/pixabay-api.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport errorIcon from './img/bi_x-octagon.png';\n\ndocument.addEventListener('submit', onFormSubmit);\ndocument.querySelector('.loadBtn').addEventListener('click', onLoadMoreClick);\n\nlet searchQuery = '';\nlet page = 1;\nlet isLastPage = false;\n\n\nfunction showLoader() {\n  const loader = document.getElementById('loader');\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  const loader = document.getElementById('loader');\n  loader.style.display = 'none';\n}\n\nasync function onFormSubmit(e) {\n\n  e.preventDefault();\n  page = 1;\n  searchQuery = e.target.elements.name.value;\n  document.querySelector('.gallery').innerHTML = \"\";\n  document.querySelector('.loadBtn').classList.add('hidden')\n  if (searchQuery.trim().length === 0) {\n    iziToast.error({\n      message: 'Please enter a valid search term!',\n      position: 'topRight',\n      messageColor: '#fafafb',\n      backgroundColor: '#ef4040',\n      iconUrl: errorIcon,\n      iconColor: '#ffffff',\n    });\n    return; \n  }\n\n  showLoader();\n    try{\n    const data = await showImage(searchQuery, page)\n    if (searchQuery.length > 0 && data.hits.length > 0) {\n      renderImages(data.hits);\n    } else {\n      iziToast.error({\n        message: 'Sorry, there are no images matching<br> your search query. Please try again!',\n        position: 'topRight',\n        messageColor: '#fafafb',\n        backgroundColor: '#ef4040',\n        iconUrl: errorIcon,\n        iconColor: '#ffffff',\n      });\n    }\n    checkBtnStatus(data);\n      hideLoader();\n      \n    } catch (error) {\n    hideLoader();\n    iziToast.error({\n      message: `${error}`,\n        position: 'topRight',\n        messageColor: '#fafafb',\n        backgroundColor: '#ef4040',\n        iconUrl: errorIcon,\n        iconColor: '#ffffff',\n    });\n  }\n  e.target.reset();\n  }\n\nasync function onLoadMoreClick() {\n  showLoader();\n  page += 1;\n  try {\n    const data = await showImage(searchQuery, page)\n    renderImages(data.hits);\n    checkBtnStatus(data);\n    hideLoader();\n  } catch (error) {\n    hideLoader();\n    iziToast.error({\n      message: `${error}`,\n      position: 'topRight',\n      messageColor: '#fafafb',\n      backgroundColor: '#ef4040',\n      iconUrl: errorIcon,\n      iconColor: '#ffffff',\n    });\n  }\n  if (isLastPage) {\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  }\n  smoothScroll();\n}\n\nfunction checkBtnStatus(data) {\n  const maxPage = Math.ceil(data.totalHits / perPage);\n  isLastPage = maxPage <= page;\n  if (isLastPage) {\n    document.querySelector('.loadBtn').classList.add('hidden');\n  } else {\n    document.querySelector('.loadBtn').classList.remove('hidden');\n  }\n}"],"names":["lightboxConfig","lightbox","SimpleLightbox","imageTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","images","renderImages","markup","smoothScroll","page","galleryChildsList","cardHeight","perPage","showImage","searchName","url","options","axios","errorIcon","onFormSubmit","onLoadMoreClick","searchQuery","isLastPage","showLoader","loader","hideLoader","iziToast","data","checkBtnStatus","error"],"mappings":"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"}